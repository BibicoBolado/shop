{% extends 'baseUser.html' %}
{% load widget_tweaks %}

{% block navuser %}

{% if messages %}
{% for message in messages %}
    <div class="alert alert-{{message.tags}}">
        {{ message }}
    </div>
{% endfor %}
{% endif %}
<div class="page-header">
        <h1>Carrinho de Compras</h1>
</div>
<div class="col-md-8 col-md-offset-2">
<form class="" action="" method="POST">
    {% csrf_token %}
    {{formset.management_form}}
<table class="table table-bordered">
    <thead>

                    <th>
                        ID
                    </th>
                    <th>
                        Nome
                    </th>
                    <th>
                        Pre√ßo
                    </th>
                    <th style="width: 10%;">
                        Quantidade
                    </th>
                    <th>
                        Deletar
                    </th>

    </thead>

    <tbody>
        {% for form in formset %}
            <tr>
                <td>
                    {{ form.instance.product.pk }}
                </td>
                <td>
                    {{ form.instance.product }}
                </td>
                <td>
                    R$ {{ form.instance.price|floatformat:"2" }}
                </td>
                <td >
                    {% render_field form.quantity class='form-control' %} 
                    <!--
                        Usando app que ajuda a deixar os forms bonitos :  widget_tweaks
                        agora eu posso colocar classes nos meus forms, como feito acima
                    -->
                </td>
                <td>
                    <button value="on" type="submit" name="{{ form.DELETE.html_name }}" class="btn btn-danger btn-sm">Remover</button>
                    {{form.id}}
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{% url 'core:shop' %}" class="btn btn-default">Continuar Comprando</a>
<button type="submit" class="btn btn-primary" name="button">Atualizar Carrinho</button>
<a href="{% url 'checkout:checkout' %}" class="btn btn-success">Finaliar Compra</a>
</form>
</div>
{% endblock %}